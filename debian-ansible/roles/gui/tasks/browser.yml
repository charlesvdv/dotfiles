- name: Install chromium
  apt:
    name: chromium

- name: Check if Firefox Developer Edition is already installed
  stat:
    path: /opt/firefox-dev-edition
  register: firefox_dir

- name: Install Firefox Developer Edition
  unarchive:
    src: "{{ firefox_dev_edition_url }}"
    dest: /opt
    remote_src: yes
  when: not firefox_dir.stat.exists

- name: Move Firefox Developer Edition to the right dir
  shell: mv /opt/firefox /opt/firefox-dev-edition
  args:
    creates: /opt/firefox-dev-edition

- name: Change Firefox Developer Edition folder permission
  file:
    path: /opt/firefox-dev-edition/
    recurse: yes
    owner: "{{ username }}"
    group: "{{ username }}"

- name: Add Firefox desktop file
  copy:
    src: files/firefox-dev-edition.desktop
    dest: /usr/share/applications/
    mode: 0644
    owner: root
    group: root

- name: Add default browser link
  file:
    src: /opt/firefox-dev-edition/firefox
    dest: /usr/bin/browser
    state: link
